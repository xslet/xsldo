<?xml version="1.0" encoding="utf-8"?>
<?xml-stylesheet type="text/xml" href="unit.test.xsl"?>

<unit-test title="do:if_with_expr"
 xmlns:ns1="http://aaa/bbb/ccc"
 xmlns:ns2="http://rrr/sss/ttt">

 <assert-equal name="do:match_condition_by_path">
  <condition>aaa eq ABC</condition>
  <expect>true</expect>
  <aaa>ABC</aaa>
 </assert-equal>

 <assert-equal name="do:match_condition_by_path">
  <condition>aaa/bbb eq ABC1</condition>
  <expect>true</expect>
  <aaa>
   <bbb>ABC1</bbb>
   <bbb>ABC2</bbb>
  </aaa>
  <aaa>
   <bbb>ABC3</bbb>
  </aaa>
 </assert-equal>

 <assert-equal name="do:match_condition_by_path">
  <condition>aaa[1]/bbb[2] eq ABC2</condition>
  <expect>true</expect>
  <aaa>
   <bbb>ABC1</bbb>
   <bbb>ABC2</bbb>
  </aaa>
  <aaa>
   <bbb>ABC3</bbb>
  </aaa>
 </assert-equal>

 <assert-equal name="do:match_condition_by_path">
  <condition>//ns1:AAA/ns1:BBB eq 1234</condition>
  <expect>true</expect>
 </assert-equal>

 <assert-equal name="do:match_condition_by_path">
  <condition>//ns1:AAA[2]/ns1:BBB[1] eq 5678</condition>
  <expect>true</expect>
 </assert-equal>

 <assert-equal name="do:match_condition_by_path">
  <condition>//ns1:AAA[2]/ns1:BBB[1] lt 5679</condition>
  <expect>true</expect>
 </assert-equal>

 <assert-equal name="do:match_condition_by_path">
  <condition>//ns1:AAA[2]/ns1:BBB[1] gt 5677</condition>
  <expect>true</expect>
 </assert-equal>

 <assert-equal name="do:match_condition_by_path">
  <condition>//ns1:AAA[2]/ns1:BBB[1] ge 5677</condition>
  <expect>true</expect>
 </assert-equal>

 <assert-equal name="do:match_condition_by_path">
  <condition>//ns1:AAA[2]/ns1:BBB[1] ge 5678</condition>
  <expect>true</expect>
 </assert-equal>

 <assert-equal name="do:match_condition_by_path">
  <condition>//ns1:AAA[2]/ns1:BBB[1] le 5679</condition>
  <expect>true</expect>
 </assert-equal>

 <assert-equal name="do:match_condition_by_path">
  <condition>//ns1:AAA[2]/ns1:BBB[1] le 5678</condition>
  <expect>true</expect>
 </assert-equal>

 <assert-equal name="do:match_condition_by_path">
  <condition>//ns1:AAA[2]/ns1:BBB[1] ne 5670</condition>
  <expect>true</expect>
 </assert-equal>

 <ns1:AAA>
  <ns1:BBB>1234</ns1:BBB>
 </ns1:AAA>
 <ns1:AAA>
  <ns1:BBB>5678</ns1:BBB>
  <ns1:BBB>9123</ns1:BBB>
 </ns1:AAA>

</unit-test>
