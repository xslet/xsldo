<?xml version="1.0" encoding="utf-8"?>
<?xml-stylesheet type="text/xml" href="unit.test.xsl"?>

<unit-test title="do:for_by_path with sort"
 xmlns:n="my-namespace">

 <n:use-namespace/><!-- for Firefox -->

 <assert-equal name="do:for_by_path">
  <sort_dir>asc</sort_dir>
  <sort_type>text</sort_type>
  <path>//n:A/n:B</path>
  <allow>|get_data_value_for_test|</allow>
  <get_data_value_for_test/>
  <expect>#apple#banana#grape#kiwi#melon#orange#pineapple#strawberry</expect>
 </assert-equal>


 <assert-equal name="do:for_by_path">
  <sort_name>@b</sort_name>
  <sort_dir>asc</sort_dir>
  <sort_type>number</sort_type>
  <path>//n:A/n:B</path>
  <allow>|get_data_value_for_test|</allow>
  <get_data_value_for_test/>
  <expect>#apple#grape#pineapple#kiwi#banana#strawberry#orange#melon</expect>
 </assert-equal>


 <assert-equal name="do:for_by_path">
  <sort_name>@b</sort_name>
  <sort_dir>asc</sort_dir>
  <sort_type>text</sort_type>
  <path>//n:A/n:B</path>
  <allow>|get_data_value_for_test|</allow>
  <get_data_value_for_test/>
  <expect>#grape#pineapple#kiwi#banana#strawberry#orange#melon#apple</expect>
 </assert-equal>


 <assert-equal name="do:for_by_path">
  <sort_name>n:B</sort_name>
  <sort_dir>desc</sort_dir>
  <sort_type>text</sort_type>
  <path>//n:A</path>
  <allow>|get_data_value_for_test|</allow>
  <get_data_value_for_test/>
  <expect>(#strawberry#kiwi#grape)(#orange#banana#pineapple)(#melon#apple)</expect>
 </assert-equal>


 <assert-equal name="do:for_by_path">
  <sort_name>n:B/@b</sort_name>
  <sort_dir>desc</sort_dir>
  <sort_type>number</sort_type>
  <path>//n:A</path>
  <allow>|get_data_value_for_test|</allow>
  <get_data_value_for_test/>
  <expect>(#melon#apple)(#orange#banana#pineapple)(#strawberry#kiwi#grape)</expect>
 </assert-equal>



 <n:A
  >(<n:B b="20">#orange</n:B
   ><n:B b="18">#banana</n:B
   ><n:B b="12">#pineapple</n:B
 >)</n:A>
 <n:A
  >(<n:B b="34">#melon</n:B
   ><n:B b="8">#apple</n:B
 >)</n:A>
 <n:A
  >(<n:B b="19">#strawberry</n:B
   ><n:B b="13">#kiwi</n:B
   ><n:B b="11">#grape</n:B
 >)</n:A>
</unit-test>
